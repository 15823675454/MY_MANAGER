<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">

		<link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="/static/css/login.css" />
		<script src="/static/js/jquery-3.1.1.min_index.js"></script>
		<!-- <script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script> -->
		<script src="/static/bootstrap/js/bootstrap.min.js"></script>

		<script>
			$(document).ready(function() {
				//打开会员登录 
				$("#Login_start_").click(function() {
					$("#Login_start_").addClass("btnfade")
					$("#Regist_start_").addClass("btnfade")
					$("#regist_container").hide();
					$("#_close").show();
					$("#_start").animate({
						left: '350px',
						height: '520px',
						width: '400px'
					}, 500, function() {
						$("#login_container").show(500);
						$("#_close").animate({
							height: '40px',
							width: '40px'
						}, 500);
					});
				});
				//打开会员注册
				$("#Regist_start_").click(function() {
					$("#Login_start_").addClass("btnfade")
					$("#Regist_start_").addClass("btnfade")
					$("#login_container").hide();
					$("#_close").show();
					$("#_start").animate({
						left: '350px',
						height: '520px',
						width: '400px'
					}, 500, function() {
						$("#regist_container").show(500);
						$("#_close").animate({
							height: '40px',
							width: '40px'
						}, 500);
					});
				});
				//关闭
				$("#_close").click(function() {
					$("#Login_start_").removeClass("btnfade")
					$("#Regist_start_").removeClass("btnfade")
					$("#_close").animate({
						height: '0px',
						width: '0px'
					}, 500, function() {
						$("#_close").hide(500);
						$("#login_container").hide(500);
						$("#regist_container").hide(500);
						$("#_start").animate({
							left: '0px',
							height: '0px',
							width: '0px'
						}, 500);
					});
				});
				//去 注册
				$("#toRegist").click(function(){
					$("#login_container").hide(500);
					$("#regist_container").show(500);
				});
				//去 登录
				$("#toLogin").click(function(){
					$("#regist_container").hide(500);
					$("#login_container").show(500);
				});
			});
		</script>
	</head>
	<body>

		<a id="Login_start_" class="btn btn-danger" style="width:100px;height:40px;border-radius: 0;">登陆</a>
		<a id="Regist_start_" class="btn btn-success" style="width:100px;height:40px;border-radius: 0;">注册</a>

		<!-- 会员登录  -->
		<!--<div id='Login_start' style="position: absolute;" >-->
		<div id='_start'>
			<div id='_close' style="display: none;">
				<span class="glyphicon glyphicon-remove"></span>
			</div>
			<br /> 
			<!--登录框-->
			<div id="login_container">
				<div id="lab1">
					<span id="lab_login">登录</span>
					<span id="lab_toRegist">
						&emsp;还没有账号&nbsp;
						<span id='toRegist' style="color: #EB9316;cursor: pointer;">立即注册</span>
					</span>
				</div>
				<div style="width:330px;">
					<span id="lab_type1">手机号/账号登陆</span>
				</div>
				<div id="form_container1">
					<br />
					<input type="text" class="form-control" placeholder="手机号/用户名" id="login_number" >
					<input type="password" class="form-control" placeholder="密码" id="login_password" />
					<input type="button" value="登录" class="btn btn-success" id="login_btn" />
					<span id="rememberOrfindPwd">
						<span>
							<input id="remember" type="checkbox" style="margin-bottom: -1.5px;"/>
								<label for="remember">
						</span>
						<span style="color:#000000">
								记住密码
						</span>
						</label>
						<span style="color:#000000">
								忘记密码
							</span>
					</span>
				</div>

				<div style="display:block;width:330px;height：40px">
					<span id="lab_type2">选择身份</span>
				</div>
				<div>
					<br/>
					<label for="tec1">
						<span class="shengfen">教师登录</span>
					</label>
					<input  id="tec1" type="radio" name="shengfen" value="tec">
					<label for="stu1">
						<span class="shengfen">学生登录</span>
					</label>
						<input  id="stu1" type="radio" name="shengfen" value="stu">
					<br>
				</div>
				<div class="mt-0" style="display:block;width:330px;height：40px">
					<span id="lab_type2">选择校区</span>
				</div>
				<br>
				<div>

					<label for="jb1">
						<span class="xiaoqu">江北校区</span> 
					</label>
					<input  id="jb1" type="radio" name="xiaoqu" value="jb">
					<label for="yb1">
						<span class="xiaoqu">渝北校区</span>
					</label>
					<input  id="yb1" type="radio" name="xiaoqu" value="yb">
					<label for="jfb1">
						<span class="xiaoqu">解放碑校区</span>
					</label>
					<input id="jfb1" type="radio" name="xiaoqu" value="jfb">

				</div>
			</div>
			<!-- 会员注册 -->
			<div id='regist_container' style="display:none;">
				<div id="lab1">
					<span id="lab_login">注册</span>
					<span id="lab_toLogin">
						&emsp;已有账号&nbsp;
						<span id='toLogin' style="color: #EB9316;cursor: pointer;">立即登录</span>
					</span>
				</div>
				<div id="form_container2" style="padding-top: 25px;">
					
					<input type="text" class="form-control" value="admin"  placeholder="用户名" id="regist_account"/>
					<input type="password" class="form-control" placeholder="密码" id="regist_password1" />
					<input type="password" class="form-control" placeholder="确认密码" id="regist_password2" />
					<input type="text" class="form-control" placeholder="手机号" id="regist_phone" />
					<input type="text" class="form-control" placeholder="验证码" id="regist_vcode" />
					<!--<button id="getVCode" type="button" class="btn btn-success" >获取验证码</button>-->
					<input id="getVCode" type="button" class="btn btn-success" value="点击发送验证码" onclick="sendCode(this)" />

				</div>
				<input type="button" value="注册" class="btn btn-success" id="regist_btn" />
			</div>
		</div>

	</body>
	<script>
		$(".shengfen").on("click",function(){
			$(".shengfen").removeClass("shengfen1")
			$(this).addClass("shengfen1")
		})
		$(".xiaoqu").on("click",function(){
			$(".xiaoqu").removeClass("xiaoqu1")
			$(this).addClass("xiaoqu1")
		})
		$("#login_btn").on("click",function(){
			var shengfen = $("input:radio[name='shengfen']:checked").val()
			console.log(shengfen)
			if (shengfen == null){
				alert('请选择登录身份')
				return false
			}
			if(shengfen=='tec'){
				shengfen='1'
			}
			else{
				shengfen='0'
			}
			var school = $("input:radio[name='xiaoqu']:checked").val()
			
			if (school==null){
				alert('请选择校区!')
				return false
			}
			if(school=='yb'){
				console.log(11111111111)
				school='ybxq'
			}
			else if(school=='jb'){
				console.log(22222222222222)
				school='jbxq'
			}
			else if(school=='jfb'){
				console.log(333333333333)
				school='jfb'
			}
			console.log(school)
			var username = $('#login_number').val()
			var password = $('#login_password').val()
			// console.log(shengfen, school, username, password)
			var post_data = {'username':username, 'password': password, 'identity': shengfen, 'school':school}
			$.ajax({
                // 请求方式
            type: "post",
            // contentType 
            contentType: "application/json",
            // dataType
            dataType: "json",
            // url
            url: "http://176.221.13.63:8000/user/login/"+school,
            data: JSON.stringify(post_data),
            // result 为请求的返回结果对象
            success: function (result) {
                if (200 == result.code) {
					// console.log(666666666666)
                    window.localStorage.setItem('manager_token', result.token)
                    window.localStorage.setItem('manager_user', result.username)
                    alert('登陆成功')
                    refer_url = document.referrer
                   
                    window.location = '/interior/teacher/'+result.username;
                } else {
                    alert(result.error)
                }
            }
            })





		})
		var clock = '';
		var nums = 30;
		var btn;
		function sendCode(thisBtn) {
			btn = thisBtn;
			btn.disabled = true; //将按钮置为不可点击
			btn.value = '重新获取（'+nums+'）';
			clock = setInterval(doLoop, 1000); //一秒执行一次
		}

		function doLoop() {
			nums--;
			if (nums > 0) {
				btn.value = '重新获取（'+nums+'）';
			} else {
				clearInterval(clock); //清除js定时器
				btn.disabled = false;
				btn.value = '点击发送验证码';
				nums = 10; //重置时间
			}
		}
		
		// $(document).ready(function(){
		// 	$("#login_tec").click(function(){
		// 		$("input[name='shengfen']").defaultValue="tec"
		// 		console.log($("input[name='shengfen']"))
		// 	});
		// 	$("#login_stu").click(function(){
		// 		$("input[name='shengfen']").defaultValue="stu"  
		// 	});
		// });
	</script>

</html>